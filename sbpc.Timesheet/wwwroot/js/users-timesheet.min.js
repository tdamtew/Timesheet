$(function(){function n(){$("form.hour").find(":text,input[type='number'],input[type='checkbox']").each(function(){$(this).attr("Id").indexOf("Date")<0&&$(this).val("");$(this).is(":checked")&&$(this).removeAttr("checked")});$("form.hour").find("input[name='Id']").val(0);$("form.expense").find(":text,input[type='number']").each(function(){$(this).attr("Id").indexOf("Date")<0&&$(this).val("")});$("form.expense").find("input[name='Id']").val(0);$("form.mileage").find(":text,input[type='number']").each(function(){$(this).attr("Id").indexOf("Date")<0&&$(this).val("")});$("form.mileage").find("input[name='Id']").val(0);$("#summaryDate,#hourDate,#expenseDate,#mileageDate").datepicker();$(".table").DataTable({order:[]});$('[data-toggle="tooltip"]').tooltip();t()}function t(){jQuery.validator.addMethod("alphanumeric",function(n,t){return this.optional(t)||/^[a-zA-Z0-9 ]+$/.test(n)});$("form.hour").validate({rules:{Date:{required:!0,date:!0},JobName:{required:!0},Hours:{required:!0,number:!0,min:.5,max:24},Note:{alphanumeric:!0,maxlength:100}},messages:{Date:{required:"please enter date.",date:"please enter a valid date."},JobName:"please select the job.",Hours:{required:"please enter your hours.",number:"hours can only be numbers.",min:"minimum number of hours is 0.5.",max:"maximum number of hours is 24."},Note:{alphanumeric:"Note can not contain special characters.",maxlength:"Note can not be more than 100 characters long."}}});$("form.expense").validate({rules:{Date:{required:!0,date:!0},JobName:{required:!0},Category:{required:!0},Method:{required:!0},Amount:{required:!0,number:!0,min:1,max:9999999.99},Note:{alphanumeric:!0,maxlength:100}},messages:{Date:{required:"please enter date.",date:"please enter a valid date."},JobName:"please select the job.",Category:"please select the expense category.",Method:"please select the expense method.",Amount:{required:"please enter your expense amount.",number:"Expenses can only be numbers.",min:"minimum expense amount is $1.",max:"maximum expense amount is $9,999,999.99."},Note:{alphanumeric:"Note can not contain special characters.",maxlength:"Note can not be more than 100 characters long."}}});$("form.mileage").validate({rules:{Date:{required:!0,date:!0},JobName:{required:!0},mile:{required:!0,number:!0,min:1},Note:{alphanumeric:!0,maxlength:100}},messages:{Date:{required:"please enter date.",date:"please enter a valid date."},JobName:"please select the job.",mile:{required:"please enter your mileage.",number:"mileage can only be numbers.",min:"minimum number of miles is 1."},Note:{alphanumeric:"Note can not contain special characters.",maxlength:"Note can not be more than 100 characters long."}}})}n();$(document).on("change","#summaryDate",function(t){t.preventDefault();val=Date.parse($(this).val());isNaN(val)||($("#wait").modal("show"),$.get("/Timesheet/GetDate/?date="+$(this).val()+"&employee="+$("#userId :selected").text(),function(t){$("#TimesheetWidget").html(t);$("#wait").modal("hide");n()}))});$(document).on("change","#userId",function(t){t.preventDefault();$("#wait").modal("show");$.get("/Timesheet/GetDate/?date="+$("#summaryDate").val()+"&employee="+$("#userId :selected").text(),function(t){$("#TimesheetWidget").html(t);$("#wait").modal("hide");n()})});$(document).on("submit","form.hour",function(t){t.preventDefault();$("#wait").modal("show");$.post("/Timesheet/SaveHour?employee="+$("#userId :selected").text(),$(this).serialize(),function(t){$("#TimesheetWidget").html(t);$("#wait").modal("hide");$("#submitHour").notify("Add/Update hour successful!","success");n()})});$(document).on("click",".edit-hour",function(n){n.preventDefault();$.get("/Timesheet/EditHour/?Id="+$(this).data("hour"),function(n){$("#HourWidget").html(n);$("#summaryDate,#hourDate,#expenseDate,#mileageDate").datepicker();t()})});$(document).on("click",".delete-hour",function(t){t.preventDefault();$("#wait").modal("show");$.post("/Timesheet/DeleteHour",{Id:$(this).data("hour"),date:$(this).data("date"),employee:$("#userId :selected").text()},function(t){$("form.hour")[0].reset();$("#TimesheetWidget").html(t);$("#wait").modal("hide");$(".notify").notify("hour removed successfully!","success");n()})});$(document).on("submit","form.expense",function(t){t.preventDefault();$("#wait").modal("show");$.post("/Timesheet/SaveExpense?employee="+$("#userId :selected").text(),$(this).serialize(),function(t){$("#TimesheetWidget").html(t);$('.nav-tabs a[href="#expense"]').tab("show");$("#wait").modal("hide");$("#submitExpense").notify("Add/Update expense successful!","success");n()})});$(document).on("click",".edit-expense",function(n){n.preventDefault();$.get("/Timesheet/EditExpense/?Id="+$(this).data("expense"),function(n){$("#ExpenseWidget").html(n);$("#summaryDate,#hourDate,#expenseDate,#mileageDate").datepicker();t()})});$(document).on("click",".delete-expense",function(t){t.preventDefault();$("#wait").modal("show");$.post("/Timesheet/DeleteExpense",{Id:$(this).data("expense"),date:$(this).data("date"),employee:$("#userId :selected").text()},function(t){$("#TimesheetWidget").html(t);$('.nav-tabs a[href="#expense"]').tab("show");$("#wait").modal("hide");$(".notify").notify("expense removed successfully!","success");n()})});$(document).on("submit","form.mileage",function(t){t.preventDefault();$("#wait").modal("show");$.post("/Timesheet/SaveMileage?employee="+$("#userId :selected").text(),$(this).serialize(),function(t){$("#TimesheetWidget").html(t);$('.nav-tabs a[href="#mileage"]').tab("show");$("#wait").modal("hide");$("#submitMileage").notify("Add/Update mileage successful!","success");n()})});$(document).on("click",".edit-mileage",function(n){n.preventDefault();$.get("/Timesheet/EditMileage/?Id="+$(this).data("mileage"),function(n){$("#MileageWidget").html(n);$("#summaryDate,#hourDate,#expenseDate,#mileageDate").datepicker();t()})});$(document).on("click",".delete-mileage",function(t){t.preventDefault();$("#wait").modal("show");$.post("/Timesheet/DeleteMileage",{Id:$(this).data("mileage"),date:$(this).data("date"),employee:$("#userId :selected").text()},function(t){$("#TimesheetWidget").html(t);$('.nav-tabs a[href="#mileage"]').tab("show");$("#wait").modal("hide");$(".notify").notify("mileage removed successfully!","success");n()})})});