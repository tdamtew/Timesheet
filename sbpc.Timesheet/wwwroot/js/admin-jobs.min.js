$(function(){function n(){$("#jobsTable").DataTable();$("form.job").find(":text").val("");t()}function t(){$.validator.addMethod("job",function(n,t){return this.optional(t)||/^[a-zA-Z(.:) ]+$/.test(n)});$("form.job").validate({rules:{Name:{required:!0,job:!0,maxlength:50},OverTimeRate:{required:!0,number:!0,min:1},CostPerMile:{required:!0,number:!0,min:0}},messages:{Name:{required:"please enter job name.",job:"job name can only contain letters and ':'.",maxlength:"job name can not be more than 30 characters."},OverTimeRate:{required:"please provide overtime rate.",number:"overtime rate can only be numbers.",min:"overtime rate can not be less than 1."},CostPerMile:{required:"please provide cost per mile.",number:"cost per mile can only be numbers.",min:"cost per mile can not be less than 0."}}})}n();$(document).on("submit","form.job",function(t){t.preventDefault();$("#confirmModal").modal("hide");$("#wait").modal("show");$.ajax({type:"post",url:"/Admin/SaveJob",data:$(this).serialize(),success:function(t){$("#JobsWidget").html(t);$("#wait").modal("hide");$("#submitJob").notify("Job has been added/updated successfully!","success");n()},error:function(){$("#wait").modal("hide");$("#submitJob").notify("Error occurred while adding/updating job. Please try again later.","error")}})});$(document).on("click",".delete-job",function(n){n.preventDefault();$("#jobId").html($(this).data("name")).data("job",$(this).data("job"));$("#confirmModal").modal("show")});$(document).on("click",".edit-job",function(n){n.preventDefault();$.get("/Admin/EditJob/?jobId="+$(this).data("job"),function(n){$("#JobWidget").html(n);t()})});$(document).on("click","#confirmButton",function(t){t.preventDefault();$("#confirmModal").modal("hide");$("#wait").modal("show");$.ajax({type:"post",url:"/Admin/DeleteJob",data:{jobId:$("#jobId").data("job"),__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()},success:function(t){$("#JobsWidget").html(t);$("#wait").modal("hide");$(".notify").notify("Job has been removed successfully!","success");n()},error:function(n){$("#wait").modal("hide");$(".notify").notify(n.status==400?"System was unable to find the job to remove.":"Error occurred while removing the job. Please try again later.","error")}})})});